# async> async, await

*ì´ ê¸€ì€ ë“œë¦¼ì½”ë”© ì—˜ë¦¬ë‹˜ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°•ì˜ë¥¼ ì°¸ê³ í•˜ì—¬ ê³µë¶€ ëª©ì ìœ¼ë¡œ ì‘ì„±í•œ ê¸€ì…ë‹ˆë‹¤.<br>
(ì¶œì²˜:Â https://www.youtube.com/watch?v=aoQSOZfz3vQ)

<br>

## async, await

`async`ì™€ `await`ì€ promiseë¥¼ ê°„í¸í•˜ê³ , ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë§Œë“¤ì–´ì¤€ë‹¤. <br>


â” <b>syntactic sugar</b>
<br>
`async`ì™€ `await`ì€ ìƒˆë¡œìš´ ê²ƒì´ ì•„ë‹ˆë¼ promiseìœ„ì— ê°„í¸í•œ APIë¥¼ ì œê³µí•œë‹¤. <br>
ì´ì²˜ëŸ¼ ê¸°ì¡´ì— ì¡´ì¬í•˜ëŠ” ê²ƒì„ ê°ì‹¸ì„œ í¸í•˜ê²Œ ì“¸ ìˆ˜ ìˆëŠ” APIë¥¼ ì œê³µí•˜ëŠ” ê²ƒì„ **syntactic sugar**ë¼ê³  í•œë‹¤.<br>

classë„ ìƒˆë¡œìš´ ê²ƒì´ ì•„ë‹Œ í”„ë¡œí† íƒ€ì…ì„ baseë¡œ í•œ, ìœ„ì— ë§ë¶™ì—¬ì§„ **syntatic sugar**ì´ë‹¤.
<br>
<br>

### async

asyncì˜ ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ì.

```jsx
function fetchUser(){
//ì‚¬ìš©ìì˜ ë°ì´í„°ë¥¼ backendì—ì„œ ë°›ì•„ì˜¤ëŠ” í•¨ìˆ˜ì´ë‹¤.
//ë„¤íŠ¸ì›Œí¬ í†µì‹ ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ”ë° 10ì´ˆê°€ ê±¸ë¦°ë‹¤ê³  ê°€ì •í•˜ì.
	return 'kathy';
}

const user = fetchUser();
console.log(user);
//10ì´ˆ í›„ì— ë°›ì•„ì˜¨ ì‚¬ìš©ìì˜ ì´ë¦„ì¸ kathyë¥¼ ì¶œë ¥í•œë‹¤.
```

ìœ„ì²˜ëŸ¼ ì˜¤ë˜ê±¸ë¦¬ëŠ” ì½”ë“œëŠ” ë¹„ë™ê¸°ì ì¸ ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šì„ ê²½ìš°, ë¬¸ì œê°€ ë°œìƒí•œë‹¤. <br>
ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ë™ê¸°ì ìœ¼ë¡œ ì½”ë“œë¥¼ ìˆ˜í–‰í•œë‹¤. <br>
ë”°ë¼ì„œ, ìœ„ì˜ ì½”ë“œì—ì„œ ë’¤ì— UI ê´€ë ¨ ì½”ë“œê°€ ìˆì„ ê²½ìš°, ì‚¬ìš©ìì˜ ì´ë¦„ì„ ë°›ì•„ì˜¤ëŠ” 10ì´ˆë™ì•ˆ ì›¹ ì‚¬ì´íŠ¸ ìœ ì €ëŠ” í…… ë¹ˆ í™”ë©´ì„ ë³´ê²Œ ëœë‹¤.  
<br>

ê·¸ëŸ¬ë¯€ë¡œ, ì•„ë˜ ì½”ë“œì²˜ëŸ¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•´ì¤˜ì•¼ í•œë‹¤. 

```jsx
async function fetchUser(){
//ì‚¬ìš©ìì˜ ë°ì´í„°ë¥¼ backendì—ì„œ ë°›ì•„ì˜¤ëŠ” í•¨ìˆ˜ì´ë‹¤.
//ë„¤íŠ¸ì›Œí¬ í†µì‹ ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ”ë° 10ì´ˆê°€ ê±¸ë¦°ë‹¤ê³  ê°€ì •í•˜ì.
	return 'kathy';
}

const user = fetchUser();
user.then(console.log);

```

promiseëŒ€ì‹  ê°„ë‹¨í•˜ê²Œ asyncë¥¼ í†µí•´ì„œ ë¹„ë™ê¸° ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

<br>
<br>

### â­await

`await`ì€ `async`ê°€ ë¶™ì€ í•¨ìˆ˜ ë‚´ì—ì„œë§Œ ì“¸ ìˆ˜ ìˆë‹¤. ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ì.

```jsx
//ì •í•´ì§„ ms(ë°€ë¦¬ì„¸ì»¨ë“œ)ê°€ ì§€ë‚˜ë©´ resolveë¥¼ í˜¸ì¶œí•˜ëŠ” promiseë¥¼ ë¦¬í„´í•œë‹¤.
function delay(ms){
	return new Promise(resolve => setTimeout(resolve, ms));)
}

async function getApple(){
	await delay(3000); //awaitì€ delayê°€ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì¤€ë‹¤.
  return 'ğŸ';//asyncê°€ ìˆìœ¼ë¯€ë¡œ 3ì´ˆê°€ ì§€ë‚˜ë©´ ì‚¬ê³¼ë¥¼ ë¦¬í„´í•˜ëŠ” promiseê°€ ë§Œë“¤ì–´ì§„ë‹¤.
}

async function getBanana(){
	await delay(3000);
	return 'ğŸŒ'; 
}
/*ìœ„ì˜ ì½”ë“œë¥¼ promiseë¡œ ë§Œë“¤ì–´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.
	function getBanana(){
		return delay(3000)
		.then(()=> 'ğŸŒ');
}
ì´ë ‡ê²Œ chainingì„ í•˜ëŠ” ê²ƒë³´ë‹¨ awaitê³¼ asyncì˜ ì½”ë“œê°€ ë” ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆë‹¤.
*/
```
<br>
ìœ„ì˜ ì½”ë“œì— ì´ì–´ì„œ ë°”ë‚˜ë‚˜ì™€ ì‚¬ê³¼ë¥¼ ë°›ì•„ì˜¤ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì. ê¸°ì¡´ì˜ promiseë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì“¸ ìˆ˜ ìˆë‹¤.

```jsx
function pickFruites(){
	return getApple().then(apple =>{
		return getBanana().then(banana => `${apple} + ${banana}`);
	});
}

pickFruite().then(console.log);
```
<br>
 í•˜ì§€ë§Œ ì½œë°±ì§€ì˜¥ì´ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì•„ë˜ì²˜ëŸ¼ `async` ì™€ `await`ìœ¼ë¡œ ë™ê¸°ì ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ë“¯ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```jsx
async function pickFruites(){
	const apple = await getApple();
	const banana = await getBanana();
	return `${apple}+${banana}`;
}

pickFruite().then(console.log);
```
<br>

ì—ëŸ¬ì²˜ë¦¬ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤. 

```jsx
async function getApple(){
	await delay(3000); 
	throw 'error';
  return 'ğŸ';
}

async function pickFruites(){
	try{
		const apple = await getApple();
		const banana = await getBanana();
	}catch(){

	}
	return `${apple}+${banana}`;
}

pickFruite().then(console.log);
```
<br>
<br>

### await ë³‘ë ¬ ì²˜ë¦¬

```jsx
async function pickFruites(){
	const apple = await getApple();
	const banana = await getBanana();
	return `${apple}+${banana}`;
}

pickFruite().then(console.log);
```

ì´ ì½”ë“œëŠ” appleì„ ë°›ì•„ì˜¤ëŠ”ë° 1ì´ˆ, bananaë¥¼ ë°›ì•„ì˜¤ëŠ”ë° 1ì´ˆê°€ ìˆœì„œëŒ€ë¡œ ê±¸ë¦°ë‹¤. <br>
bananaì™€ appleì„ ë°›ì•„ì˜¤ëŠ”ë° ì„œë¡œ ì—°ê´€ì´ ì—†ê¸° ë•Œë¬¸ì— ì„œë¡œ ê¸°ë‹¤ë¦´ í•„ìš”ê°€ ì—†ë‹¤. 
<br>

ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. 

```jsx
async function pickFruites(){
	const applePromise = await getApple();
	const bananaPromise = await getBanana();
	//promiseë¥¼ ë§Œë“œëŠ” ìˆœê°„ promiseê°€ ë°”ë¡œ ì‹¤í–‰ë¨.

	const apple = await applePromise; //ë™ê¸°í™”
	const banana = await bananaPromise;

return `${apple}+${banana}`;
}

pickFruite().then(console.log);
```

ìœ„ ì½”ë“œì˜ ê²°ê³¼ë¥¼ ë³´ë©´ 1ì´ˆ ë§Œì— ë³‘ë ¬ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤. <br>
í•˜ì§€ë§Œ ë³‘ë ¬ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ì½”ë“œë¥¼ ìœ„ì²˜ëŸ¼ ë³µì¡í•˜ê²Œ ì“°ì§„ ì•ŠëŠ”ë‹¤. ì•„ë˜ ë” ì¢‹ì€ ë°©ë²•ì´ ìˆë‹¤.

<br>

### ìœ ìš©í•œ Promise

promiseì—ì„œ ì œê³µí•˜ëŠ” ìœ ìš©í•œ APIê°€ ìˆë‹¤.<br>
all APIëŠ” Promiseì— ë°°ì—´ì„ ì „ë‹¬í•˜ê²Œ ë˜ë©´, ëª¨ë“  Promiseë“¤ì´ ë³‘ë ¬ì ìœ¼ë¡œ ë‹¤ ë°›ì„ ë•Œê¹Œì§€ ëª¨ì•„ì¤€ë‹¤. 


```jsx
function pickAllFruits(){
	return Promise.all([getApple(), getBanana()]).then(fruits =>
		fruits.join(' + ');
	);
}

pickAllFruite().then(console.log);
```


ì²« ë²ˆì§¸ ê³¼ì¼ë§Œ ë°›ì•„ì˜¤ê³  ì‹¶ìœ¼ë©´ race APIë¥¼ ì‚¬ìš©í•œë‹¤.

```jsx
function pickOnlyOne(){
	return Promise.race([getApple(), getBanana()]);
}

pickOnlyOne().then(console.log); //ë°”ë‚˜ë‚˜ê°€ 1ì´ˆ í›„ì— ì¶œë ¥ëœë‹¤.
```
